---
layout: post
title: Map borders and floating text
date: 2021-12-31 00:00:00.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- random
tags: []
video: assets/video/battle_text_tw.mp4
meta:
author:
permalink: "2021/12/31-map-borders-and-floating-text/"
---

<p>Long time no website updates, should go into new year&#39;s resolution... I expect the posts will be weekly, but, as with weekly updates of an evening solo developer, updates will have less content (whatever&#39;s done during the week)</p>
<p>Here are some updates from last week, which is substantial thanks to holidays!</p>
<p><strong>Map borders</strong>. I&#39;ve added some meander border in the maps. It&#39;s comprised by just 3 tiles (corner, horizontal, vertical) and it supports rotations, so it can be applied seamlessly to any map. And ideally, at some point, it will be replaced by something prettier. </p>

<figure>
<div class="video-container-square"><iframe src="{{ site.baseurl }}/assets/video/map_border_tw.mp4" allowfullscreen="" frameborder="0"></iframe></div>
<figcaption>Map borders, using 3 repeating tiles (horizontal, vertical and corner)</figcaption>
</figure>

<p><strong>Sprite silhouette correction</strong>. I&#39;ve using alpha masking for sprites (not blending), and some sprites used to have some bad halo at their silhouettes when filtered (e.g. zoomed out too much), shown <a href="https://pbs.twimg.com/media/FHkVsS1XEAMgaU0?format=png&amp;name=360x360">here</a> (original, crispier version <a href="https://pbs.twimg.com/media/FHkVpLNWUAQd0Tj?format=png&amp;name=360x360">here</a>). That was because of pixels with 0 alpha had unsuitable color values, and when filtered they got blended with the silhouette. Long story short, wrote a script to process all pixels with 0 alpha and replace their RGB content with the average of their non-transparent neighbour RGB values. Result <a href="https://pbs.twimg.com/media/FHkVx1mXoAEEsJo?format=png&amp;name=240x240">here</a>, halos gone.</p>

<p><strong>Floating text</strong>. This was long overdue, and was kinda reminded of its importance from /u/nesguru &#39;s updates (similar tileset, but Legend already has floating text). So, I went on to implement something. While I&#39;m using Unity, I do <strong>not</strong> want to use that &quot;Â£!$%^ Canvas system, and TextMeshPro (which is the go-to solution for such text) uses Canvas, so ... I had to roll my own solution! There&#39;s a paper from Valve for SDF fonts, and <a href="https://github.com/Chlumsky/msdf-atlas-gen">some nice person</a> developed an extension for that, which addresses a few issues. So, I went on to implement that, which involved picking some free font online (I chose Roboto Slab from Google Fonts), converting it into a texture, preparing a special JSON with configuration, and a few shaders and a special particle system later, and that was it. I copied a bit the idea from Tangledeep where floating text goes into random directions sometimes (although there&#39;s a now-fixed bug in the video, and text goes left-ish only), and I&#39;ve also added support for a typewriter effect to be used in certain cases (when characters talk in to-be-developed cutscenes etc)</p>

<figure>
<div class="video-container-square"><iframe src="{{ site.baseurl }}/assets/video/battle_text_tw.mp4" allowfullscreen="" frameborder="0"></iframe></div>
<figcaption>Battle floating text</figcaption>
</figure>


<figure>
<div class="video-container-square"><iframe src="{{ site.baseurl }}/assets/video/typewriter_tw.mp4" allowfullscreen="" frameborder="0"></iframe></div>
<figcaption>Typewriter effect</figcaption>
</figure>

<p><strong>More decals</strong>. Added a few more possible decals in levels, especially in some biome areas (so that it&#39;s not just bones and blood), so they look a bit less empty. Example shown in the video below.</p>

<figure>
<div class="video-container"><iframe src="https://www.youtube.com/embed/1X17hNz53Go" allowfullscreen="" frameborder="0"></iframe></div>
<figcaption>Short gameplay video showing decals, floating text, and map borders</figcaption>
</figure>

<p><strong>Name change?</strong> I&#39;ve been contemplating more and more a name change, and put up a couple polls on the Roguelikes subreddit (<a href="https://www.reddit.com/r/roguelikes/comments/rs5dz6/name_critique_age_of_transcendence/">here</a>) and Twitter (<a href="https://twitter.com/ByteArcane/status/1476583360818520068?s=20">here</a>). Any opinions welcome!</p>

That's it and happy new year to everyone!